<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Dozenal Clock</title>
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
	<script>
		$(function() {
			var solsticeData = [
				[ 21, 21 ],	//	UTC+00:45 1956> 11528-11529 = *67↋↊-67↋↋
				[ 21, 22 ],	//	UTC+00:45 1957> 11529-11520 = *67↋↋-6800
				[ 21, 22 ],	//	UTC+00:45 1958> 11520-11521 = *6800-6801
				[ 22, 22 ],	//	UTC+00:45 1959> 11521-11522 = *6801-6802
				[ 21, 21 ],	//	UTC+00:45 1960> 11522-11523 = *6802-6803
				[ 21, 22 ],	//	UTC+00:45 1961> 11523-11524 = *6803-6804
				[ 21, 22 ],	//	UTC+00:45 1962> 11524-11525 = *6804-6805
				[ 22, 22 ],	//	UTC+00:45 1963> 11525-11526 = *6805-6806
				[ 21, 21 ],	//	UTC+00:45 1964> 11526-11527 = *6806-6807
				[ 21, 22 ],	//	UTC+00:45 1965> 11527-11528 = *6807-6808
				[ 21, 22 ],	//	UTC+00:45 1966> 11528-11529 = *6808-6809
				[ 22, 22 ],	//	UTC+00:45 1967> 11529-11530 = *6809-680↊
				[ 21, 21 ],	//	UTC+00:45 1968> 11530-11531 = *680↊-680↋
				[ 21, 22 ],	//	UTC+00:45 1969> 11531-11532 = *680↋-6810
				[ 21, 22 ],	//	UTC+00:45 1970> 11532-11533 = *6810-6811
				[ 22, 22 ],	//	UTC+00:45 1971> 11533-11534 = *6811-6812
				[ 21, 21 ],	//	UTC+00:45 1972> 11534-11535 = *6812-6813
				[ 21, 22 ],	//	UTC+00:45 1973> 11535-11536 = *6813-6814
				[ 21, 22 ],	//	UTC+00:45 1974> 11536-11537 = *6814-6815
				[ 22, 22 ],	//	UTC+00:45 1975> 11537-11538 = *6815-6816
				[ 21, 21 ],	//	UTC+00:45 1976> 11538-11539 = *6816-6817
				[ 21, 22 ],	//	UTC+00:45 1977> 11539-11540 = *6817-6818
				[ 21, 22 ],	//	UTC+00:45 1978> 11540-11541 = *6818-6819
				[ 22, 22 ],	//	UTC+00:45 1979> 11541-11542 = *6819-681↊
				[ 21, 21 ],	//	UTC+00:45 1980> 11542-11543 = *681↊-681↋
				[ 21, 21 ],	//	UTC+00:45 1981> 11543-11544 = *681↋-6820
				[ 21, 22 ],	//	UTC+00:45 1982> 11544-11545 = *6820-6821
				[ 21, 22 ],	//	UTC+00:45 1983> 11545-11546 = *6821-6822
				[ 21, 21 ],	//	UTC+00:45 1984> 11546-11547 = *6822-6823
				[ 21, 21 ],	//	UTC+00:45 1985> 11547-11548 = *6823-6824
				[ 21, 22 ],	//	UTC+00:45 1986> 11548-11549 = *6824-6825
				[ 21, 22 ],	//	UTC+00:45 1987> 11549-11550 = *6825-6826
				[ 21, 21 ],	//	UTC+00:45 1988> 11550-11551 = *6826-6827
				[ 21, 21 ],	//	UTC+00:45 1989> 11551-11552 = *6827-6828
				[ 21, 22 ],	//	UTC+00:45 1990> 11552-11553 = *6828-6829
				[ 21, 22 ],	//	UTC+00:45 1991> 11553-11554 = *6829-682↊
				[ 21, 21 ],	//	UTC+00:45 1992> 11554-11555 = *682↊-682↋
				[ 21, 21 ],	//	UTC+00:45 1993> 11555-11556 = *682↋-6830
				[ 21, 22 ],	//	UTC+00:45 1994> 11556-11557 = *6830-6831
				[ 21, 22 ],	//	UTC+00:45 1995> 11557-11558 = *6831-6832
				[ 21, 21 ],	//	UTC+00:45 1996> 11558-11559 = *6832-6833
				[ 21, 21 ],	//	UTC+00:45 1997> 11559-11560 = *6833-6834
				[ 21, 22 ],	//	UTC+00:45 1998> 11560-11561 = *6834-6835
				[ 21, 22 ],	//	UTC+00:45 1999> 11561-11562 = *6835-6836
				[ 21, 21 ],	//	UTC+00:45 2000> 11562-11563 = *6836-6837
				[ 21, 21 ],	//	UTC+00:45 2001> 11563-11564 = *6837-6838
				[ 21, 22 ],	//	UTC+00:45 2002> 11564-11565 = *6838-6839
				[ 21, 22 ],	//	UTC+00:45 2003> 11565-11566 = *6839-683↊
				[ 21, 21 ],	//	UTC+00:45 2004> 11566-11567 = *683↊-683↋
				[ 21, 21 ],	//	UTC+00:45 2005> 11567-11568 = *683↋-6840
				[ 21, 22 ],	//	UTC+00:45 2006> 11568-11569 = *6840-6841
				[ 21, 22 ],	//	UTC+00:45 2007> 11569-11570 = *6841-6842
				[ 21, 21 ],	//	UTC+00:45 2008> 11570-11571 = *6842-6843
				[ 21, 21 ],	//	UTC+00:45 2009> 11571-11572 = *6843-6844
				[ 21, 22 ],	//	UTC+00:45 2010> 11572-11573 = *6844-6845
				[ 21, 22 ],	//	UTC+00:45 2011> 11573-11574 = *6845-6846
				[ 20, 21 ],	//	UTC+00:45 2012> 11574-11575 = *6846-6847
				[ 21, 21 ],	//	UTC+00:45 2013> 11575-11576 = *6847-6848
				[ 21, 21 ],	//	UTC+00:45 2014> 11576-11577 = *6848-6849
				[ 21, 22 ],	//	UTC+00:45 2015> 11577-11578 = *6849-684↊
				[ 20, 21 ],	//	UTC+00:45 2016> 11578-11579 = *684↊-684↋
				[ 21, 21 ],	//	UTC+00:45 2017> 11579-11580 = *684↋-6850
				[ 21, 21 ],	//	UTC+00:45 2018> 11580-11581 = *6850-6851
				[ 21, 22 ],	//	UTC+00:45 2019> 11581-11582 = *6851-6852
				[ 20, 21 ],	//	UTC+00:45 2020> 11582-11583 = *6852-6853
				[ 21, 21 ],	//	UTC+00:45 2021> 11583-11584 = *6853-6854
				[ 21, 21 ],	//	UTC+00:45 2022> 11584-11585 = *6854-6855
				[ 21, 22 ],	//	UTC+00:45 2023> 11585-11586 = *6855-6856
				[ 20, 21 ],	//	UTC+00:45 2024> 11586-11587 = *6856-6857
				[ 21, 21 ],	//	UTC+00:45 2025> 11587-11588 = *6857-6858
				[ 21, 21 ],	//	UTC+00:45 2026> 11588-11589 = *6858-6859
				[ 21, 22 ],	//	UTC+00:45 2027> 11589-11590 = *6859-685↊
				[ 20, 21 ],	//	UTC+00:45 2028> 11590-11591 = *685↊-685↋
				[ 21, 21 ],	//	UTC+00:45 2029> 11591-11592 = *685↋-6860
				[ 21, 21 ],	//	UTC+00:45 2030> 11592-11593 = *6860-6861
				[ 21, 22 ],	//	UTC+00:45 2031> 11593-11594 = *6861-6862
				[ 20, 21 ],	//	UTC+00:45 2032> 11594-11595 = *6862-6863
				[ 21, 21 ],	//	UTC+00:45 2033> 11595-11596 = *6863-6864
				[ 21, 21 ],	//	UTC+00:45 2034> 11596-11597 = *6864-6865
				[ 21, 22 ],	//	UTC+00:45 2035> 11597-11598 = *6865-6866
				[ 20, 21 ],	//	UTC+00:45 2036> 11598-11599 = *6866-6867
				[ 21, 21 ],	//	UTC+00:45 2037> 11599-11600 = *6867-6868
				[ 21, 21 ],	//	UTC+00:45 2038> 11600-11601 = *6868-6869
				[ 21, 22 ],	//	UTC+00:45 2039> 11601-11602 = *6869-686↊
				[ 20, 21 ],	//	UTC+00:45 2040> 11602-11603 = *686↊-686↋
				[ 21, 21 ],	//	UTC+00:45 2041> 11603-11604 = *686↋-6870
				[ 21, 21 ],	//	UTC+00:45 2042> 11604-11605 = *6870-6871
				[ 21, 22 ],	//	UTC+00:45 2043> 11605-11606 = *6871-6872
				[ 20, 21 ],	//	UTC+00:45 2044> 11606-11607 = *6872-6873
				[ 20, 21 ],	//	UTC+00:45 2045> 11607-11608 = *6873-6874
				[ 21, 21 ],	//	UTC+00:45 2046> 11608-11609 = *6874-6875
				[ 21, 21 ],	//	UTC+00:45 2047> 11609-11610 = *6875-6876
				[ 20, 21 ],	//	UTC+00:45 2048> 11610-11611 = *6876-6877
				[ 20, 21 ],	//	UTC+00:45 2049> 11611-11612 = *6877-6878
				[ 21, 21 ],	//	UTC+00:45 2050> 11612-11613 = *6878-6879
				[ 21, 21 ],	//	UTC+00:45 2051> 11613-11614 = *6879-687↊
				[ 20, 21 ],	//	UTC+00:45 2052> 11614-11615 = *687↊-687↋
				[ 20, 21 ],	//	UTC+00:45 2053> 11615-11616 = *687↋-6880
				[ 21, 21 ],	//	UTC+00:45 2054> 11616-11617 = *6880-6881
				[ 21, 21 ],	//	UTC+00:45 2055> 11617-11618 = *6881-6882
				[ 20, 21 ],	//	UTC+00:45 2056> 11618-11619 = *6882-6883
				[ 20, 21 ],	//	UTC+00:45 2057> 11619-11620 = *6883-6884
				[ 21, 21 ],	//	UTC+00:45 2058> 11620-11621 = *6884-6885
				[ 21, 21 ],	//	UTC+00:45 2059> 11621-11622 = *6885-6886
				[ 20, 21 ],	//	UTC+00:45 2060> 11622-11623 = *6886-6887
				[ 20, 21 ],	//	UTC+00:45 2061> 11623-11624 = *6887-6888
				[ 21, 21 ],	//	UTC+00:45 2062> 11624-11625 = *6888-6889
				[ 21, 21 ],	//	UTC+00:45 2063> 11625-11626 = *6889-688↊
				[ 20, 21 ],	//	UTC+00:45 2064> 11626-11627 = *688↊-688↋
				[ 20, 21 ],	//	UTC+00:45 2065> 11627-11628 = *688↋-6890
				[ 21, 21 ],	//	UTC+00:45 2066> 11628-11629 = *6890-6891
				[ 21, 21 ],	//	UTC+00:45 2067> 11629-11630 = *6891-6892
				[ 20, 21 ],	//	UTC+00:45 2068> 11630-11631 = *6892-6893
				[ 20, 21 ],	//	UTC+00:45 2069> 11631-11632 = *6893-6894
				[ 21, 21 ],	//	UTC+00:45 2070> 11632-11633 = *6894-6895
				[ 21, 21 ],	//	UTC+00:45 2071> 11633-11634 = *6895-6896
				[ 20, 21 ],	//	UTC+00:45 2072> 11634-11635 = *6896-6897
				[ 20, 21 ],	//	UTC+00:45 2073> 11635-11636 = *6897-6898
				[ 20, 21 ],	//	UTC+00:45 2074> 11636-11637 = *6898-6899
				[ 21, 21 ],	//	UTC+00:45 2075> 11637-11638 = *6899-689↊
				[ 20, 21 ],	//	UTC+00:45 2076> 11638-11639 = *689↊-689↋
				[ 20, 21 ],	//	UTC+00:45 2077> 11639-11640 = *689↋-68↊0
				[ 20, 21 ],	//	UTC+00:45 2078> 11640-11641 = *68↊0-68↊1
				[ 21, 21 ],	//	UTC+00:45 2079> 11641-11642 = *68↊1-68↊2
				[ 20, 21 ],	//	UTC+00:45 2080> 11642-11643 = *68↊2-68↊3
				[ 20, 21 ],	//	UTC+00:45 2081> 11643-11644 = *68↊3-68↊4
				[ 20, 21 ],	//	UTC+00:45 2082> 11644-11645 = *68↊4-68↊5
				[ 21, 21 ],	//	UTC+00:45 2083> 11645-11646 = *68↊5-68↊6
				[ 20, 20 ],	//	UTC+00:45 2084> 11646-11647 = *68↊6-68↊7
				[ 20, 21 ],	//	UTC+00:45 2085> 11647-11648 = *68↊7-68↊8
				[ 20, 21 ],	//	UTC+00:45 2086> 11648-11649 = *68↊8-68↊9
				[ 21, 21 ],	//	UTC+00:45 2087> 11649-11650 = *68↊9-68↊↊
				[ 20, 20 ],	//	UTC+00:45 2088> 11650-11651 = *68↊↊-68↊↋
				[ 20, 21 ],	//	UTC+00:45 2089> 11651-11652 = *68↊↋-68↋0
				[ 20, 21 ],	//	UTC+00:45 2090> 11652-11653 = *68↋0-68↋1
				[ 21, 21 ],	//	UTC+00:45 2091> 11653-11654 = *68↋1-68↋2
				[ 20, 20 ],	//	UTC+00:45 2092> 11654-11655 = *68↋2-68↋3
				[ 20, 21 ],	//	UTC+00:45 2093> 11655-11656 = *68↋3-68↋4
				[ 20, 21 ],	//	UTC+00:45 2094> 11656-11657 = *68↋4-68↋5
				[ 21, 21 ],	//	UTC+00:45 2095> 11657-11658 = *68↋5-68↋6
				[ 20, 20 ],	//	UTC+00:45 2096> 11658-11659 = *68↋6-68↋7
				[ 20, 21 ],	//	UTC+00:45 2097> 11659-11660 = *68↋7-68↋8
				[ 20, 21 ],	//	UTC+00:45 2098> 11660-11661 = *68↋8-68↋9
				[ 21, 21 ],	//	UTC+00:45 2099> 11661-11662 = *68↋9-68↋↊
				[ 21, 21 ],	//	UTC+00:45 2100> 11662-11663 = *68↋↊-68↋↋
				[ 21, 22 ]	//	UTC+00:45 2101> 11663-11664 = *68↋↋-6900
			];

			var schemeData = [
				[ 31, 31, 31, 31, 30, 30, 30, 30, 30, 30, 31, 31 ],	// 4+2
				[ 31, 31, 31, 31, 30, 30, 30, 30, 30, 30, 30, 31 ],	// 4+1
				[ 31, 31, 31, 30, 30, 30, 30, 30, 30, 30, 31, 31 ]	// 3+2
			];

			var REF_YEAR = 1957 - 1;
			var HOLOCENE_EPOCH = 9564 - 1;
			var DAY_MILLIS = 24 * 60 * 60 * 1000;
			var TIME_ZONE = 'T00:00:00+00:45';
			var OFFSET_MILLIS = 45 * 60 * 1000;
			var HEXCIA_MILLIS = Math.pow(12, 6) / DAY_MILLIS;

			function toFixed(num, len) {
				num = '' + num;
				while (num.length < len) {
					num = '0' + num;
				}
				return num;
			}

			function getNewYear(today) {
				var year = today.getUTCFullYear();
				var newYearCur = new Date(year + '-06-' + solsticeData[year - REF_YEAR][0] + TIME_ZONE);
				var newYearPrev = new Date((year - 1) + '-06-' + solsticeData[(year - 1) - REF_YEAR][0] + TIME_ZONE);
				if (today >= newYearCur) {
					return newYearCur;
				} else {
					return newYearPrev;
				}
			}

			function getScheme(newYear) {
				var year = newYear.getUTCFullYear();
				var date1 = new Date(year + '-06-' + solsticeData[year - REF_YEAR][0] + TIME_ZONE);
				var date2 = new Date(year + '-12-' + solsticeData[year - REF_YEAR][1] + TIME_ZONE);
				var date3 = new Date((year + 1) + '-06-' + solsticeData[(year + 1) - REF_YEAR][0] + TIME_ZONE);
				var days1 = (date2.getTime() - date1.getTime()) / DAY_MILLIS;
				var days2 = (date3.getTime() - date2.getTime()) / DAY_MILLIS;
				if (days1 === 183) {
					return 2;
				} else if (days2 === 181) {
					return 1;
				} else if (days2 === 182) {
					return 0;
				}
			}

			function getHoloceneTime(now) {
				now.setTime(now.getTime() + OFFSET_MILLIS);
				var today = new Date(now.getUTCFullYear() + '-' + toFixed(now.getUTCMonth() + 1, 2) + '-' + toFixed(now.getUTCDate(), 2) + TIME_ZONE);
			 	var time = Math.floor((now.getTime() - today.getTime() - OFFSET_MILLIS) * HEXCIA_MILLIS);
				var newYear = getNewYear(today);
				var day = (today.getTime() - newYear.getTime()) / DAY_MILLIS;
				var s = getScheme(newYear);
				var month = 0;
				while (day >= schemeData[s][month]) {
					day = day - schemeData[s][month];
					month++;
				}
				var y = (newYear.getUTCFullYear() + HOLOCENE_EPOCH).toString(12);
				var m = month.toString(12);
				var w = Math.floor(day / 6);
				var d = day % 6;
			 	var t = toFixed(time.toString(12), 6);
				return s + y + m + w + d + t;
			}

			setInterval(function() {
				var dozTime = getHoloceneTime(new Date());
				var unciaDay = parseInt(dozTime.charAt(8), 12);
				var biciaDay = parseInt(dozTime.charAt(9), 12);
				var triciaDay = parseInt(dozTime.charAt(10), 12);
				var quadciaDay = parseInt(dozTime.charAt(11), 12);
				var pentciaDay = parseInt(dozTime.charAt(12), 12)
				var hexciaDay = parseInt(dozTime.charAt(13), 12)
				var hexciaDayInDeg = hexciaDay * 30;
				var pentciaDayInDeg = pentciaDay * 30 + hexciaDayInDeg / 12;
				var quadciaDayInDeg = quadciaDay * 30 + pentciaDayInDeg / 12;
				var triciaDayInDeg = triciaDay * 30 + quadciaDayInDeg / 12;
				var biciaDayInDeg = biciaDay * 30 + triciaDayInDeg / 12;
				var unciaDayInDeg = unciaDay * 30 + biciaDayInDeg / 12;
				var display = dozTime.substring(1, 5) + dozTime.charAt(0).replace(/2/g, '`').replace(/1/g, '\'').replace(/0/g, '"') + dozTime.charAt(5) + '/' + dozTime.charAt(6) + '/' + dozTime.charAt(7) + ' ≡ ' + dozTime.substring(8,11);
				display = display.replace(/a/g, '\u00AE').replace(/b/g, '\u2020');
				$('.display').html(display);
				$('.clock-ele.unciahand').css({
					'transform': 'rotate(' + unciaDayInDeg + 'deg)'
				});
				$('.clock-ele.biciahand').css({
					'transform': 'rotate(' + biciaDayInDeg + 'deg)'
				});
				$('.clock-ele.triciahand').css({
					'transform': 'rotate(' + triciaDayInDeg + 'deg)'
				});
			},(1/HEXCIA_MILLIS));
		});
	</script>
</head>
<body>
	<div class="container">
		<div class="clock">
			<div class="clock-ele sand"> <img src="img/sand.png"> </div>
			<div class="clock-ele pitman2"> <img src="img/pitman2.png"> </div>
			<div class="clock-ele pitman"> <img src="img/pitman.png"> </div>
			<div class="clock-ele unciahand"> <img src="img/biciahand.png"> </div>
			<div class="clock-ele biciahand"> <img src="img/triciahand.png"> </div>
			<div class="clock-ele triciahand"> <img src="img/quadciahand.png"> </div>
			<div class="clock-ele nose"> <img src="img/nose.png"> </div>
		</div>
		<div class="display">0000`0/0/0 ≡ 0:0:00</div>
	</div>
	<div class="credit">All images that make the clock are designed and owned by Paul Rapoport.<br>source: <a href="http://dozenal.ae-web.ca/">dozenal.ae-web.ca</a></div>
</body>
</html>
